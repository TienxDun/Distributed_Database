<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>System Maintenance - HUFLIT Distributed Database</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/layout.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/responsive.css">
    <link rel="stylesheet" href="css/maintenance.css">
</head>

<body>

    <div class="app-container">
        <!-- Sidebar -->
        <?php
        include 'sidebar.php';
        include 'maintenance_components.php';
        renderSidebar('maintenance');
        ?>

        <!-- Main Wrapper -->
        <main class="main-wrapper">
            <!-- Top Header -->
            <header class="top-header">
                <div class="header-left">
                    <button class="toggle-sidebar-btn" id="toggleSidebarBtn">‚ò∞</button>
                    <h1 class="page-title">Qu·∫£n tr·ªã H·ªá th·ªëng</h1>
                </div>
            </header>

            <!-- Content Body -->
            <div class="content-body">
                <div class="container">

                    <div class="alert alert-error" style="margin-bottom: 2rem; border-left: 4px solid var(--danger);">
                        <strong>‚ö†Ô∏è Khu v·ª±c Nguy hi·ªÉm:</strong> C√°c h√†nh ƒë·ªông t·∫°i ƒë√¢y s·∫Ω ·∫£nh h∆∞·ªüng tr·ª±c ti·∫øp ƒë·∫øn d·ªØ li·ªáu
                        to√†n h·ªá th·ªëng. H√£y c√¢n nh·∫Øc tr∆∞·ªõc khi th·ª±c hi·ªán.
                    </div>

                    <!-- Actions Grid -->
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem; margin-bottom: 2rem;">
                        <?php
                        renderActionCard(
                            'Reset Database',
                            'X√≥a to√†n b·ªô d·ªØ li·ªáu hi·ªán c√≥ trong t·∫•t c·∫£ c√°c Site ƒë·ªÉ l√†m s·∫°ch h·ªá th·ªëng.',
                            'X√°c nh·∫≠n X√≥a s·∫°ch',
                            'btn-danger',
                            'resetDatabase()',
                            'border-danger'
                        );

                        renderActionCard(
                            'Seed Sample Data',
                            'N·∫°p l·∫°i b·ªô d·ªØ li·ªáu m·∫´u chu·∫©n (Khoa, Sinh vi√™n, M√¥n h·ªçc...).',
                            'N·∫°p d·ªØ li·ªáu m·∫´u',
                            'btn-success',
                            'seedDatabase()',
                            'border-success'
                        );
                        ?>
                    </div>

                    <!-- Site Explorer -->
                    <div class="card">
                        <div class="card-header">
                            <h2 class="card-title">üó∫Ô∏è Site Explorer (C√¥ng c·ª• Demo)</h2>
                            <div class="form-group" style="margin:0; width: 200px;">
                                <select id="exploreTable" class="form-control" onchange="exploreData()">
                                    <option value="Khoa">B·∫£ng Khoa</option>
                                    <option value="SinhVien">B·∫£ng Sinh Vi√™n</option>
                                    <option value="MonHoc">B·∫£ng M√¥n H·ªçc</option>
                                    <option value="CTDaoTao">B·∫£ng CT ƒê√†o T·∫°o</option>
                                    <option value="DangKy">B·∫£ng ƒêƒÉng K√Ω</option>
                                </select>
                            </div>
                        </div>
                        <div class="card-body">
                            <p style="color: var(--slate-500); margin-bottom: 1.5rem;">
                                So s√°nh d·ªØ li·ªáu th·ª±c t·∫ø ƒë∆∞·ª£c l∆∞u tr·ªØ t·∫°i c√°c ph√¢n m·∫£nh (Sites) kh√°c nhau.
                            </p>

                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1.5rem;">
                                <!-- Site A -->
                                <div class="site-card a" id="site-card-a" style="
                                    background: rgba(17, 24, 39, 0.7);
                                    backdrop-filter: blur(20px);
                                    -webkit-backdrop-filter: blur(20px);
                                    border-radius: 20px;
                                    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.05);
                                    border: 1px solid rgba(255, 255, 255, 0.08);
                                    min-height: 420px;
                                    overflow: hidden;
                                    position: relative;
                                    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                                    display: flex;
                                    flex-direction: column;
                                ">
                                    <div class="site-card-header" style="
                                        padding: 1.5rem 2rem;
                                        border-bottom: 1px solid rgba(255, 255, 255, 0.08);
                                        display: flex;
                                        justify-content: space-between;
                                        align-items: center;
                                        background: rgba(255, 255, 255, 0.02);
                                        position: relative;
                                    ">
                                        <div style="
                                            font-size: 1.1rem;
                                            font-weight: 700;
                                            color: #f9fafb;
                                            letter-spacing: -0.01em;
                                        ">SITE A</div>
                                        <div style="
                                            width: 12px;
                                            height: 12px;
                                            border-radius: 50%;
                                            background: linear-gradient(135deg, #a855f7 0%, #8b5cf6 100%);
                                            box-shadow: 0 0 10px rgba(168, 85, 247, 0.6);
                                        "></div>
                                    </div>
                                    <div class="site-table-container" style="
                                        flex: 1;
                                        padding: 1.5rem;
                                        display: flex;
                                        flex-direction: column;
                                        justify-content: flex-start;
                                    ">
                                        <div id="site-a-table" style="
                                            font-size: 0.875rem;
                                            overflow-x: auto;
                                            width: 100%;
                                            border-radius: 12px;
                                            border: 1px solid rgba(255, 255, 255, 0.08);
                                            background: rgba(31, 41, 55, 0.5);
                                            backdrop-filter: blur(10px);
                                        ">
                                            <table class="site-table" style="
                                                width: 100%;
                                                border-collapse: separate;
                                                border-spacing: 0;
                                                font-size: 0.875rem;
                                            ">
                                                <thead>
                                                    <tr>
                                                        <th style="
                                                            background: rgba(139, 92, 246, 0.1);
                                                            color: #d1d5db;
                                                            font-weight: 600;
                                                            text-align: left;
                                                            padding: 1rem 1.25rem;
                                                            border-bottom: 1px solid rgba(255, 255, 255, 0.08);
                                                            position: sticky;
                                                            top: 0;
                                                            z-index: 5;
                                                            text-transform: uppercase;
                                                            font-size: 0.75rem;
                                                            letter-spacing: 0.05em;
                                                        ">Makhoa</th>
                                                        <th style="
                                                            background: rgba(139, 92, 246, 0.1);
                                                            color: #d1d5db;
                                                            font-weight: 600;
                                                            text-align: left;
                                                            padding: 1rem 1.25rem;
                                                            border-bottom: 1px solid rgba(255, 255, 255, 0.08);
                                                            position: sticky;
                                                            top: 0;
                                                            z-index: 5;
                                                            text-transform: uppercase;
                                                            font-size: 0.75rem;
                                                            letter-spacing: 0.05em;
                                                        ">Tenkhoa</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr style="transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);">
                                                        <td style="
                                                            padding: 1rem 1.25rem;
                                                            border-bottom: 1px solid rgba(255, 255, 255, 0.08);
                                                            color: #d1d5db;
                                                            vertical-align: middle;
                                                        ">CNTT</td>
                                                        <td style="
                                                            padding: 1rem 1.25rem;
                                                            border-bottom: 1px solid rgba(255, 255, 255, 0.08);
                                                            color: #d1d5db;
                                                            vertical-align: middle;
                                                        ">C√¥ng ngh·ªá th√¥ng tin</td>
                                                    </tr>
                                                    <tr style="transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);">
                                                        <td style="
                                                            padding: 1rem 1.25rem;
                                                            border-bottom: 1px solid rgba(255, 255, 255, 0.08);
                                                            color: #d1d5db;
                                                            vertical-align: middle;
                                                        ">DLKS</td>
                                                        <td style="
                                                            padding: 1rem 1.25rem;
                                                            border-bottom: 1px solid rgba(255, 255, 255, 0.08);
                                                            color: #d1d5db;
                                                            vertical-align: middle;
                                                        ">Du l·ªãch kh√°ch s·∫°n</td>
                                                    </tr>
                                                    <tr style="transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);">
                                                        <td style="
                                                            padding: 1rem 1.25rem;
                                                            border-bottom: 1px solid rgba(255, 255, 255, 0.08);
                                                            color: #d1d5db;
                                                            vertical-align: middle;
                                                        ">KTTC</td>
                                                        <td style="
                                                            padding: 1rem 1.25rem;
                                                            border-bottom: 1px solid rgba(255, 255, 255, 0.08);
                                                            color: #d1d5db;
                                                            vertical-align: middle;
                                                        ">K·∫ø to√°n t√†i ch√≠nh</td>
                                                    </tr>
                                                    <tr style="transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);">
                                                        <td style="
                                                            padding: 1rem 1.25rem;
                                                            border-bottom: 1px solid rgba(255, 255, 255, 0.08);
                                                            color: #d1d5db;
                                                            vertical-align: middle;
                                                        ">LLCT</td>
                                                        <td style="
                                                            padding: 1rem 1.25rem;
                                                            border-bottom: none;
                                                            color: #d1d5db;
                                                            vertical-align: middle;
                                                        ">Lu·∫≠t c√¥ng ty</td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>

                                <!-- Site B -->
                                <div class="site-card b" id="site-card-b" style="
                                    background: rgba(17, 24, 39, 0.7);
                                    backdrop-filter: blur(20px);
                                    -webkit-backdrop-filter: blur(20px);
                                    border-radius: 20px;
                                    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.05);
                                    border: 1px solid rgba(255, 255, 255, 0.08);
                                    min-height: 420px;
                                    overflow: hidden;
                                    position: relative;
                                    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                                    display: flex;
                                    flex-direction: column;
                                ">
                                    <div class="site-card-header" style="
                                        padding: 1.5rem 2rem;
                                        border-bottom: 1px solid rgba(255, 255, 255, 0.08);
                                        display: flex;
                                        justify-content: space-between;
                                        align-items: center;
                                        background: rgba(255, 255, 255, 0.02);
                                        position: relative;
                                    ">
                                        <div style="
                                            font-size: 1.1rem;
                                            font-weight: 700;
                                            color: #f9fafb;
                                            letter-spacing: -0.01em;
                                        ">SITE B</div>
                                        <div style="
                                            width: 12px;
                                            height: 12px;
                                            border-radius: 50%;
                                            background: linear-gradient(135deg, #3b82f6 0%, #06b6d4 100%);
                                            box-shadow: 0 0 10px rgba(59, 130, 246, 0.6);
                                        "></div>
                                    </div>
                                    <div class="site-table-container" style="
                                        flex: 1;
                                        padding: 1.5rem;
                                        display: flex;
                                        flex-direction: column;
                                        justify-content: flex-start;
                                    ">
                                        <div id="site-b-table" style="
                                            font-size: 0.875rem;
                                            overflow-x: auto;
                                            width: 100%;
                                            border-radius: 12px;
                                            border: 1px solid rgba(255, 255, 255, 0.08);
                                            background: rgba(31, 41, 55, 0.5);
                                            backdrop-filter: blur(10px);
                                        ">
                                            <table class="site-table" style="
                                                width: 100%;
                                                border-collapse: separate;
                                                border-spacing: 0;
                                                font-size: 0.875rem;
                                            ">
                                                <thead>
                                                    <tr>
                                                        <th style="
                                                            background: rgba(139, 92, 246, 0.1);
                                                            color: #d1d5db;
                                                            font-weight: 600;
                                                            text-align: left;
                                                            padding: 1rem 1.25rem;
                                                            border-bottom: 1px solid rgba(255, 255, 255, 0.08);
                                                            position: sticky;
                                                            top: 0;
                                                            z-index: 5;
                                                            text-transform: uppercase;
                                                            font-size: 0.75rem;
                                                            letter-spacing: 0.05em;
                                                        ">Makhoa</th>
                                                        <th style="
                                                            background: rgba(139, 92, 246, 0.1);
                                                            color: #d1d5db;
                                                            font-weight: 600;
                                                            text-align: left;
                                                            padding: 1rem 1.25rem;
                                                            border-bottom: 1px solid rgba(255, 255, 255, 0.08);
                                                            position: sticky;
                                                            top: 0;
                                                            z-index: 5;
                                                            text-transform: uppercase;
                                                            font-size: 0.75rem;
                                                            letter-spacing: 0.05em;
                                                        ">Tenkhoa</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr style="transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);">
                                                        <td style="
                                                            padding: 1rem 1.25rem;
                                                            border-bottom: 1px solid rgba(255, 255, 255, 0.08);
                                                            color: #d1d5db;
                                                            vertical-align: middle;
                                                        ">NN</td>
                                                        <td style="
                                                            padding: 1rem 1.25rem;
                                                            border-bottom: 1px solid rgba(255, 255, 255, 0.08);
                                                            color: #d1d5db;
                                                            vertical-align: middle;
                                                        ">Ng√¥n ng·ªØ</td>
                                                    </tr>
                                                    <tr style="transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);">
                                                        <td style="
                                                            padding: 1rem 1.25rem;
                                                            border-bottom: 1px solid rgba(255, 255, 255, 0.08);
                                                            color: #d1d5db;
                                                            vertical-align: middle;
                                                        ">NVPD</td>
                                                        <td style="
                                                            padding: 1rem 1.25rem;
                                                            border-bottom: 1px solid rgba(255, 255, 255, 0.08);
                                                            color: #d1d5db;
                                                            vertical-align: middle;
                                                        ">Ng√¥n ng·ªØ v√† VƒÉn h√≥a Ph∆∞∆°ng ƒê√¥ng</td>
                                                    </tr>
                                                    <tr style="transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);">
                                                        <td style="
                                                            padding: 1rem 1.25rem;
                                                            border-bottom: 1px solid rgba(255, 255, 255, 0.08);
                                                            color: #d1d5db;
                                                            vertical-align: middle;
                                                        ">QHQT</td>
                                                        <td style="
                                                            padding: 1rem 1.25rem;
                                                            border-bottom: 1px solid rgba(255, 255, 255, 0.08);
                                                            color: #d1d5db;
                                                            vertical-align: middle;
                                                        ">Quan h·ªá qu·ªëc t·∫ø</td>
                                                    </tr>
                                                    <tr style="transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);">
                                                        <td style="
                                                            padding: 1rem 1.25rem;
                                                            border-bottom: 1px solid rgba(255, 255, 255, 0.08);
                                                            color: #d1d5db;
                                                            vertical-align: middle;
                                                        ">QTKD</td>
                                                        <td style="
                                                            padding: 1rem 1.25rem;
                                                            border-bottom: none;
                                                            color: #d1d5db;
                                                            vertical-align: middle;
                                                        ">Qu·∫£n tr·ªã kinh doanh</td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>

                                <!-- Site C -->
                                <div class="site-card c" id="site-card-c" style="
                                    background: rgba(17, 24, 39, 0.7);
                                    backdrop-filter: blur(20px);
                                    -webkit-backdrop-filter: blur(20px);
                                    border-radius: 20px;
                                    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.05);
                                    border: 1px solid rgba(255, 255, 255, 0.08);
                                    min-height: 420px;
                                    overflow: hidden;
                                    position: relative;
                                    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                                    display: flex;
                                    flex-direction: column;
                                ">
                                    <div class="site-card-header" style="
                                        padding: 1.5rem 2rem;
                                        border-bottom: 1px solid rgba(255, 255, 255, 0.08);
                                        display: flex;
                                        justify-content: space-between;
                                        align-items: center;
                                        background: rgba(255, 255, 255, 0.02);
                                        position: relative;
                                    ">
                                        <div style="
                                            font-size: 1.1rem;
                                            font-weight: 700;
                                            color: #f9fafb;
                                            letter-spacing: -0.01em;
                                        ">SITE C</div>
                                        <div style="
                                            width: 12px;
                                            height: 12px;
                                            border-radius: 50%;
                                            background: linear-gradient(135deg, #06b6d4 0%, #14b8a6 100%);
                                            box-shadow: 0 0 10px rgba(6, 182, 212, 0.6);
                                        "></div>
                                    </div>
                                    <div class="site-table-container" style="
                                        flex: 1;
                                        padding: 1.5rem;
                                        display: flex;
                                        flex-direction: column;
                                        justify-content: flex-start;
                                    ">
                                        <div id="site-c-table" style="
                                            font-size: 0.875rem;
                                            overflow-x: auto;
                                            width: 100%;
                                            border-radius: 12px;
                                            border: 1px solid rgba(255, 255, 255, 0.08);
                                            background: rgba(31, 41, 55, 0.5);
                                            backdrop-filter: blur(10px);
                                        ">
                                            <table class="site-table" style="
                                                width: 100%;
                                                border-collapse: separate;
                                                border-spacing: 0;
                                                font-size: 0.875rem;
                                            ">
                                                <thead>
                                                    <tr>
                                                        <th style="
                                                            background: rgba(139, 92, 246, 0.1);
                                                            color: #d1d5db;
                                                            font-weight: 600;
                                                            text-align: left;
                                                            padding: 1rem 1.25rem;
                                                            border-bottom: 1px solid rgba(255, 255, 255, 0.08);
                                                            position: sticky;
                                                            top: 0;
                                                            z-index: 5;
                                                            text-transform: uppercase;
                                                            font-size: 0.75rem;
                                                            letter-spacing: 0.05em;
                                                        ">Makhoa</th>
                                                        <th style="
                                                            background: rgba(139, 92, 246, 0.1);
                                                            color: #d1d5db;
                                                            font-weight: 600;
                                                            text-align: left;
                                                            padding: 1rem 1.25rem;
                                                            border-bottom: 1px solid rgba(255, 255, 255, 0.08);
                                                            position: sticky;
                                                            top: 0;
                                                            z-index: 5;
                                                            text-transform: uppercase;
                                                            font-size: 0.75rem;
                                                            letter-spacing: 0.05em;
                                                        ">Tenkhoa</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr style="transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);">
                                                        <td style="
                                                            padding: 1rem 1.25rem;
                                                            border-bottom: 1px solid rgba(255, 255, 255, 0.08);
                                                            color: #d1d5db;
                                                            vertical-align: middle;
                                                        ">SLCT</td>
                                                        <td style="
                                                            padding: 1rem 1.25rem;
                                                            border-bottom: 1px solid rgba(255, 255, 255, 0.08);
                                                            color: #d1d5db;
                                                            vertical-align: middle;
                                                        ">S∆∞ ph·∫°m L·ªãch s·ª≠</td>
                                                    </tr>
                                                    <tr style="transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);">
                                                        <td style="
                                                            padding: 1rem 1.25rem;
                                                            border-bottom: 1px solid rgba(255, 255, 255, 0.08);
                                                            color: #d1d5db;
                                                            vertical-align: middle;
                                                        ">SUAT</td>
                                                        <td style="
                                                            padding: 1rem 1.25rem;
                                                            border-bottom: 1px solid rgba(255, 255, 255, 0.08);
                                                            color: #d1d5db;
                                                            vertical-align: middle;
                                                        ">S∆∞ ph·∫°m Anh</td>
                                                    </tr>
                                                    <tr style="transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);">
                                                        <td style="
                                                            padding: 1rem 1.25rem;
                                                            border-bottom: 1px solid rgba(255, 255, 255, 0.08);
                                                            color: #d1d5db;
                                                            vertical-align: middle;
                                                        ">TLKS</td>
                                                        <td style="
                                                            padding: 1rem 1.25rem;
                                                            border-bottom: none;
                                                            color: #d1d5db;
                                                            vertical-align: middle;
                                                        ">Th·ªÉ d·ª•c th·ªÉ thao</td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </main>
    </div>

    <!-- LOADING OVERLAY -->
    <div id="loadingOverlay"
        style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(255,255,255,0.8); z-index:2000; align-items:center; justify-content:center;">
        <div style="text-align:center;">
            <div
                style="width:40px; height:40px; border:4px solid var(--slate-200); border-top-color:var(--primary-600); border-radius:50%; animation:spin 1s linear infinite;">
            </div>
            <div class="loading-text" style="margin-top:1rem; font-weight:500; color:var(--slate-600);">ƒêang x·ª≠ l√Ω...</div>
        </div>
    </div>
    <style>
        @keyframes spin {
            100% {
                transform: rotate(360deg);
            }
        }

        /* Hover effects cho cards */
        .site-card:hover {
            border-color: rgba(255, 255, 255, 0.12);
            box-shadow: 0 16px 48px rgba(0, 0, 0, 0.5), 0 0 40px rgba(139, 92, 246, 0.15);
            transform: translateY(-2px);
        }

        /* Hover effects cho table rows */
        .site-table tr:hover td {
            background: rgba(139, 92, 246, 0.05);
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .site-card {
                min-height: 380px;
            }
            .site-card-header {
                padding: 1rem 1.5rem;
            }
            .site-table-container {
                padding: 1rem;
            }
        }
    </style>

    <script src="js/sidebar.js"></script>
    <script type="module" src="js/maintenance.js"></script>
</body>

</html>